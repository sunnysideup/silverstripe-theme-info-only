(self.webpackChunkpublic=self.webpackChunkpublic||[]).push([[143],{224:function(){const e={bodyObject:null,init:function(){e.bodyObject=document.getElementsByTagName("body")[0],this.addBasicBodyClassListeners()},addBasicBodyClassListeners:function(){document.addEventListener("DOMContentLoaded",(function(t){e.bodyObject.classList.add("body-loaded"),e.bodyObject.classList.remove("body-unloaded"),"ontouchstart"in document.documentElement?e.bodyObject.classList.add("touch"):e.bodyObject.classList.add("no-touch")})),window.addEventListener("beforeunload",(function(){}))}};e.init()},999:function(){(function(){function e(e,s){[].forEach.call(e.getElementsByTagName("li"),(o=>{if(!s||e===o.parentNode){o.style.userSelect="none",o.style.MozUserSelect="none",o.style.msUserSelect="none",o.style.WebkitUserSelect="none";const e=o.getElementsByTagName("ul");if(e.length>0){const s=document.createElement("span");s.classList.add("open-close"),s.addEventListener("click",t.bind(null,o)),s.innerHTML='<i class="open">&nbsp;</i><i class="closed">â†°</i>',(o.classList.contains("section")||o.classList.contains("current"))&&n(o),n(o),o.insertBefore(s,e[0])}}}))}function t(e,t){let s=t.target;for(;"LI"!==s.nodeName;)s=s.parentNode;s===e&&n(e)}function n(e){const t=e.classList.contains("collapsibleListClosed"),n=e.getElementsByTagName("ul");[].forEach.call(n,(n=>{let s=n;for(;"LI"!==s.nodeName;)s=s.parentNode;s===e&&(n.style.display=t?"block":"none")})),e.classList.remove("collapsibleListOpen"),e.classList.remove("collapsibleListClosed"),n.length>0&&e.classList.add("collapsibleList"+(t?"Open":"Closed"))}return{apply:function(t){[].forEach.call(document.getElementsByTagName("ul"),(n=>{n.classList.contains("collapsibleList")&&(e(n,!0),t||[].forEach.call(n.getElementsByTagName("ul"),(e=>{e.classList.add("collapsibleList")})))}))},applyTo:e}})().apply()},440:function(){for(var e=document.querySelectorAll("input, select, textarea"),t=e.length-1;t>=0;--t){e[t].addEventListener("change",s,!1),e[t].addEventListener("keyup",s,!1),e[t].addEventListener("focus",s,!1),e[t].addEventListener("blur",s,!1),e[t].addEventListener("mousedown",s,!1);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!0),e[t].dispatchEvent(n)}function s(e){var t=e.target.value;t&&t.replace(/^\s+|\s+$/g,"")?e.target.classList.remove("no-value"):e.target.classList.add("no-value")}},222:function(e,t,n){"use strict";n(224),n(999),n(440);function s(e){const t=e.currentTarget,n=!t.classList.contains("show-current");t.classList.toggle("show-current"),t.classList.toggle("show-all");const s=document.getElementsByClassName("site");for(var o=0;o<s.length;o++){const e=s[o];n&&e.classList.contains("current")||!n?e.classList.remove("hide-not-current"):e.classList.add("hide-not-current")}}function o(e,t){e.forEach((e=>{const n=e.getAttribute("data-field").trim(),s=0===t.length,o=t.indexOf(n);s||-1!==o?e.style.display="":e.classList.contains("missing-links")?function(e,t,n){let s=!1;const o=e.querySelectorAll("li");for(var a=0;a<o.length;a++){const e=o[a].getAttribute("data-field").trim();-1!==n.indexOf(e)&&(s=!0)}e.style.display=s||t?"":"none"}(e,s,t):e.classList.contains("error")&&-1!==t.indexOf("Missing")?e.style.display="":e.style.display="none"}))}function a(e){const t=e.currentTarget.children[0].children[0];window.getSelection().selectAllChildren(t)}function i(e){if("Enter"===e.key){e.preventDefault(),e.currentTarget.blur(),window.getSelection().removeAllRanges();const t=e.currentTarget,n=t.innerHTML,s=window.location.protocol,o=window.location.hostname,a=t.parentElement.parentElement.parentElement.parentElement,i=a.dataset.id,l=s+"//"+o+("/our-sites/updateprojecthours/"+i+"/"),r=new FormData;r.append("hours",n);const d=new XMLHttpRequest;d.open("POST",l),d.send(r),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){const e=d.responseText;c(a).outerHTML=e,function(e,t){const n=window.stats.projects.filter((t=>t.id==e)),s=document.querySelector('[data-id="'+e+'"]').dataset.hoursleft;n[0].CurrentHours=t,n[0].HoursLeft=parseFloat(s)}(i,n),f(),alert("Updated Hours")}else 4==d.readyState&&(alert(d.status+" Error Updating Hours"),t.innerHTML=window.stats.projects.filter((e=>e.id==i))[0].CurrentHours)}}}function c(e){return e.classList.contains("site")?e:c(e.parentElement)}let l={};function r(){!function(){l={totalSites:0,sitesWithCurrentProject:0,totalProjects:0,activeProjects:0,projectHoursLeft:0,projectDaysLeft:0,completeDate:new Date};for(var e=0;e<window.stats.sites.length;e++){const t=window.stats.sites[e];l.totalSites++,t.isCurrent&&l.sitesWithCurrentProject++}for(e=0;e<window.stats.projects.length;e++){const t=window.stats.projects[e];l.totalProjects++,t.isActive&&(l.activeProjects++,l.projectHoursLeft+=t.HoursLeft,l.projectDaysLeft=Math.round(l.projectHoursLeft/5),l.completeDate=new Date((new Date).getTime()+24*l.projectDaysLeft*60*60*1e3))}}(),document.getElementById("stats-total-sites").innerHTML=l.totalSites,document.getElementById("stats-current-sites").innerHTML=l.sitesWithCurrentProject,document.getElementById("stats-inactive-sites").innerHTML=l.totalSites-l.sitesWithCurrentProject,document.getElementById("stats-total-projects").innerHTML=l.totalProjects,document.getElementById("stats-active-projects").innerHTML=l.activeProjects,document.getElementById("stats-past-projects").innerHTML=l.totalProjects-l.activeProjects,document.getElementById("stats-project-hours").innerHTML=Math.round(l.projectHoursLeft).toLocaleString("en-US"),document.getElementById("stats-project-days").innerHTML=l.projectDaysLeft.toLocaleString("en-GB"),document.getElementById("stats-completion-day").innerHTML=l.completeDate.toLocaleDateString("en-GB")}function d(e){const t=e.currentTarget;if("false"==t.dataset.inputactive){t.dataset.inputactive="true";const e=document.createElement("input");e.type="text",e.classList.add("addsiteinput"),e.style.width="250px",e.style.float="right",e.style.fontSize="2rem",e.style.height="3rem",e.addEventListener("keyup",(({key:n})=>{"Enter"===n&&(""!=e.value&&u(e.value),t.dataset.inputactive="false",e.remove())})),t.parentElement.append(e),e.focus()}else{t.dataset.inputactive="false";const e=t.parentElement.getElementsByClassName("addsiteinput")[0];""!=e.value&&u(e.value),e.remove()}}function u(e){const t=window.location.protocol+"//"+window.location.hostname+"/our-sites/addsite/",n=new FormData;n.append("link",e);const s=new XMLHttpRequest;s.open("POST",t),s.send(n),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){const e=s.responseText;document.body.parentElement.innerHTML=e,f(!0)}}}function m(e){const t=e.currentTarget.innerText;if(navigator.clipboard)navigator.clipboard.writeText(t);else{var n=document.createElement("textarea");n.value=t,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var s=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+s)}catch(e){console.error("Fallback: Oops, unable to copy",e)}document.body.removeChild(n)}}r();let p=[];function f(e=!1){!function(){const e=document.getElementsByClassName("addlinkbutton");for(var t=0;t<e.length;t++){const n=e[t];n.removeEventListener("click",g),n.addEventListener("click",g)}}(),function(e){const t=document.getElementById("ShowHideCurrent");t&&(t.removeEventListener("click",s,!0),t.addEventListener("click",s,!0)),e&&(t.classList.toggle("show-all"),document.getElementsByClassName("current").length>0&&t.click())}(e),function(e,t){const n=document.getElementById("fieldsToc");if(n){var s=[...document.querySelectorAll("[data-field]")];const a=[];s.forEach((e=>{const t=e.getAttribute("data-field").trim();-1===a.indexOf(t)&&a.push(t)})),a.sort();const i=document.createElement("ul");i.id="filterUl";const c=[];a.forEach((e=>{const n=document.createElement("li"),a=document.createElement("a");a.innerHTML=e,a.addEventListener("click",(function(n){const a=this.innerHTML;this.classList.toggle("current"),this.classList.toggle("link");const i=t.indexOf(a);return this.classList.contains("current")?-1===i&&t.push(e):-1!==i&&t.splice(i,1),n.preventDefault(),o(s,t),!1})),a.href="#",a.classList.add("link"),c.push(a),n.appendChild(a),i.appendChild(n)})),e||(document.getElementById("filterUl").remove(),o(s,t),c.forEach((e=>{t.includes(e.innerHTML)&&(e.classList.toggle("current"),e.classList.toggle("link"))}))),n.appendChild(i)}}(e,p),function(){const e=document.getElementsByClassName("editable-field"),t=document.getElementsByClassName("hour-graph");for(var n=0;n<e.length;n++){const t=e[n];t.removeEventListener("keydown",i),t.addEventListener("keydown",i)}for(n=0;n<t.length;n++){const e=t[n];e.removeEventListener("click",a),e.addEventListener("click",a)}}(),function(){const e=document.getElementById("add-site-frontend");e&&(e.removeEventListener("click",d),e.addEventListener("click",d))}(),function(){const e=document.getElementsByClassName("password");for(var t=0;t<e.length;t++){const n=e[t];n.removeEventListener("click",m),n.addEventListener("click",m),n.title="Click to copy to clipboard"}}(),r()}function g(e){const t=e.currentTarget;if("false"==t.dataset.inputactive){t.dataset.inputactive="true";const e=document.createElement("input");e.type="text",e.classList.add("addlinkinput"),e.style.width="250px",e.style.float="right",e.addEventListener("keyup",(({key:n})=>{"Enter"===n&&(""!=e.value&&h(t,e.value),t.dataset.inputactive="false",e.remove())})),t.before(e),e.focus()}else{t.dataset.inputactive="false";const e=t.parentElement.getElementsByClassName("addlinkinput")[0];""!=e.value&&h(t,e.value),e.remove()}}function h(e,t){const n=window.location.protocol+"//"+window.location.hostname+e.dataset.url,s=new FormData;s.append("link",t);const o=new XMLHttpRequest;o.open("POST",n),o.send(s),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){const t=o.responseText;e.parentElement.parentElement.outerHTML=t,f()}}}f(!0);const L=new URLSearchParams(window.location.search);window.onload=function(){const e=document.getElementsByClassName("menu-holder");for(var t=0;t<e.length;t++){e[t].onclick=function(e){e.target===this&&this.classList.toggle("on")}}const n=(s="s",L.get(s));var s;null!==n&&(v(n),y.value=n)};const y=document.getElementById("find-box");function v(e){const t=document.getElementById("ShowHideCurrent"),n=document.getElementById("SearchFilterHR");var s=document.getElementsByClassName("site");let o=[],a=[];for(var i=0;i<s.length;i++){const c=s.item(i),l=c.id.substring(5).indexOf(e);e?0===l?(t.style.display="none",n.style.display="none",o.push(c)):(t.style.display="none",n.style.display="none",c.classList.remove("show"),c.classList.add("hidden"),-1!=l&&a.push(c)):(t.style.display="",n.style.display="",c.classList.remove("show"),c.classList.remove("hidden"))}if(o.length>0)for(i=0;i<o.length;i++)o[i].classList.add("show"),o[i].classList.remove("hidden");else if(a.length>0)for(i=0;i<a.length;i++)a[i].classList.add("show"),a[i].classList.remove("hidden");else e.length>0&&function(e,t){let n=0;for(var s=0;s<e.length;s++){E(e[s],t)?(n++,e[s].classList.add("show"),e[s].classList.remove("hidden")):(e[s].classList.remove("show"),e[s].classList.add("hidden"))}const o=document.getElementById("SearchResult");o.innerHTML=n>0?n+"/"+e.length:"0/"+e.length}(s,e);const c=document.getElementById("SearchResult");e.length<1?c.innerHTML="":(o.length>0||a.length>0)&&(o.length>0?c.innerHTML=o.length+"/"+s.length:a.length>0&&(c.innerHTML=a.length+"/"+s.length))}function E(e,t){let n=!1;return(-1!==e.textContent.toLowerCase().indexOf(t)||w(e,t))&&(n=!0),n}function w(e,t){let n=!1;if("A"==e.tagName){-1!==e.href.toLowerCase().indexOf(t)&&(n=!0)}for(const s of e.children)w(s,t)&&(n=!0);return n}y.addEventListener("input",(function(e){const t=e.target.value.toLowerCase();v(t),function(e,t){""===t?L.delete(e):L.set(e,t);var n=window.location.origin+window.location.pathname+"?"+L.toString();window.history.pushState({path:n},"",n)}("s",t)}))}},function(e){var t;t=222,e(e.s=t)}]);